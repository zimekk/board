{"version":3,"file":"487.js","mappings":"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","sources":["webpack://@dev/web/../cast/lib/containers/index.js","webpack://@dev/web/../cast/lib/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Receiver = void 0;\n// import mqtt from \"mqtt\";\nvar react_1 = __importStar(require(\"react\"));\nvar applicationID = \"5CB45E5A\", namespace = \"urn:x-cast:com.url.cast\";\n// , receiverDead = false\n// , session = null;\nvar injectScript = function (src, type) {\n    if (type === void 0) { type = \"text/javascript\"; }\n    var script = Object.assign(document.createElement(\"script\"), {\n        type: type,\n        src: src,\n    });\n    document.head.appendChild(script);\n};\nfunction Receiver() {\n    var iframeRef = (0, react_1.useRef)(null);\n    // Update the iframe src\n    // warning: watch out for X-Frame-Options -> DENY\n    function updateFrame(url) {\n        window.castReceiverManager.setApplicationState(\"Now Playing: \" + url);\n        // document.getElementById('iframe').src = url;\n        iframeRef.current.src = url;\n    }\n    // Set the window location to the URL\n    // warning: this reciever dies essentially, because you navigated away\n    function updateLocation(url) {\n        window.castReceiverManager.setApplicationState(\"Now Playing: \" + url);\n        window.location.href = url;\n    }\n    (0, react_1.useEffect)(function () {\n        injectScript(\"//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js\");\n        window.castReceiverManager =\n            cast.receiver.CastReceiverManager.getInstance();\n        window.castReceiverManager.onReady = function (event) {\n            window.castReceiverManager.setApplicationState(\"URL Cast ready...\");\n        };\n        // messages on a custom namespace\n        var ns = \"urn:x-cast:com.url.cast\";\n        window.messageBus = window.castReceiverManager.getCastMessageBus(ns);\n        window.messageBus.onMessage = function (e) {\n            var msg = JSON.parse(e.data);\n            window.messageBus.send(e.senderId, \"ok\");\n            if (msg.type === \"iframe\")\n                updateFrame(msg.url);\n            if (msg.type === \"loc\")\n                updateLocation(msg.url);\n        };\n        // initialize CastReceiverManager\n        window.castReceiverManager.start({ statusText: \"URL Cast starting...\" });\n    }, []);\n    return (react_1.default.createElement(\"iframe\", { ref: iframeRef, src: \"\", frameBorder: \"0\", scrolling: \"no\", marginHeight: 0, marginWidth: 0, seamless: true, id: \"iframe\" }));\n}\nexports.Receiver = Receiver;\nfunction Sender() {\n    var _a = (0, react_1.useState)(false), enabled = _a[0], setEnabled = _a[1];\n    var receiverDeadRef = (0, react_1.useRef)(false);\n    var sessionRef = (0, react_1.useRef)(null);\n    var typeRef = (0, react_1.useRef)(null);\n    var urlRef = (0, react_1.useRef)(null);\n    function sessionUpdateListener(isAlive) {\n        if (!isAlive) {\n            // session = null;\n            sessionRef.current = null;\n            // disableInputs();\n            setEnabled(false);\n        }\n        console.log(\"Session is alive?: \", isAlive);\n    }\n    function receiveMessage(namespace, msg) {\n        // namespace = 'urn:x-cast:com.url.cast'\n        // it only ever says 'ok' - just confirming when a url has been received\n        console.log(\"Receiver said: \" + msg);\n    }\n    function sessionListener(newSession) {\n        console.log(\"New session ID:\" + newSession.sessionId);\n        // session = newSession;\n        sessionRef.current = newSession;\n        sessionRef.current.addUpdateListener(sessionUpdateListener);\n        sessionRef.current.addMessageListener(namespace, receiveMessage);\n        // enableInputs();\n        setEnabled(true);\n    }\n    function onErr(err) {\n        console.log(\"Err: \" + JSON.stringify(err));\n        // showError(err);\n    }\n    var handleRequestSession = (0, react_1.useCallback)(function () {\n        chrome.cast.requestSession(sessionListener, console.info);\n    }, []);\n    function sendMessage(msg) {\n        if (receiverDeadRef.current || !sessionRef.current)\n            return;\n        // send msg\n        sessionRef.current.sendMessage(namespace, msg, function () {\n            console.log(\"Message sent: \", msg);\n            // notify('Message sent: ' + JSON.stringify(msg));\n        }, onErr);\n        if (msg.type === \"loc\") {\n            receiverDeadRef.current = true;\n            // disableInputs();\n            setEnabled(false);\n            // notify('Receiver will now be unresponsive');\n        }\n    }\n    var handleSend = (0, react_1.useCallback)(function () {\n        // var url = document.getElementById('url').value\n        //   , type = document.getElementById('type').value;\n        var url = urlRef.current.value, type = typeRef.current.value;\n        if (!url || !type)\n            return;\n        sendMessage({ type: type, url: url });\n    }, []);\n    (0, react_1.useEffect)(function () {\n        injectScript(\"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js\");\n        function receiverListener(e) {\n            e === \"available\"\n                ? console.log(\"receiver found\")\n                : console.log(\"no receivers found\");\n        }\n        function initializeCastApi() {\n            var sessionRequest = new chrome.cast.SessionRequest(applicationID);\n            var apiConfig = new chrome.cast.ApiConfig(sessionRequest, sessionListener, receiverListener);\n            function onSuccess(msg) {\n                console.log(\"Sucess: \" + msg);\n            }\n            chrome.cast.initialize(apiConfig, onSuccess.bind(this, \"initialized ok\"), onErr);\n        }\n        // initialize\n        window.__onGCastApiAvailable = function (loaded) {\n            console.log([\"__onGCastApiAvailable\"], { loaded: loaded });\n            if (loaded)\n                initializeCastApi();\n        };\n    }, []);\n    return (react_1.default.createElement(\"div\", null,\n        react_1.default.createElement(\"button\", { onClick: handleRequestSession }, \"Start cast session\"),\n        react_1.default.createElement(\"p\", { id: \"step2\", className: \"notready\" }, \"Step 2: Send url\"),\n        react_1.default.createElement(\"input\", { ref: urlRef, id: \"url\", className: \"border\", type: \"text\", placeholder: \"e.g. http://example.com\", size: 30, defaultValue: \"https://www.windytv.com/\", disabled: !enabled }),\n        react_1.default.createElement(\"select\", { ref: typeRef, id: \"type\", defaultValue: \"loc\", disabled: !enabled },\n            react_1.default.createElement(\"option\", { value: \"iframe\" }, \"iframe\"),\n            react_1.default.createElement(\"option\", { value: \"loc\" }, \"location\")),\n        react_1.default.createElement(\"button\", { id: \"send\", disabled: !enabled, onClick: handleSend }, \"send\"),\n        react_1.default.createElement(\"h3\", null, \"Details\"),\n        react_1.default.createElement(\"p\", null, \"There are two methods for casting, with pros and cons:\"),\n        react_1.default.createElement(\"ol\", null,\n            react_1.default.createElement(\"li\", null, \"Load an iframe (You will have trouble loading a url with x-frame-options: same origin.)\"),\n            react_1.default.createElement(\"li\", null, \"Change the window location (You will lose control when you load the url over the receiver.)\")),\n        react_1.default.createElement(\"p\", null, \"Also, notice the chromecast viewport is 1280x720 and the default background is black before the receiver loads.\"),\n        react_1.default.createElement(\"p\", null,\n            react_1.default.createElement(\"a\", { href: \"https://github.com/DeMille/url-cast-receiver\", rel: \"noopener noreferrer\", target: \"_blank\" }, \"github.com/DeMille/url-cast-receiver\"))));\n}\nfunction Section() {\n    return (react_1.default.createElement(\"section\", null,\n        react_1.default.createElement(\"h2\", null, \"Cast Receiver\"),\n        react_1.default.createElement(Sender, null)));\n}\nexports.default = Section;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = void 0;\nvar containers_1 = require(\"./containers\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return __importDefault(containers_1).default; } });\n"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","Receiver","react_1","namespace","injectScript","src","type","script","assign","document","createElement","head","appendChild","Sender","_a","useState","enabled","setEnabled","receiverDeadRef","useRef","sessionRef","typeRef","urlRef","sessionUpdateListener","isAlive","current","console","log","receiveMessage","msg","sessionListener","newSession","sessionId","addUpdateListener","addMessageListener","onErr","err","JSON","stringify","handleRequestSession","useCallback","chrome","cast","requestSession","info","handleSend","url","sendMessage","useEffect","receiverListener","e","window","__onGCastApiAvailable","loaded","sessionRequest","SessionRequest","apiConfig","ApiConfig","initialize","bind","initializeCastApi","default","onClick","id","className","ref","placeholder","size","defaultValue","disabled","href","rel","target","iframeRef","castReceiverManager","receiver","CastReceiverManager","getInstance","onReady","event","setApplicationState","messageBus","getCastMessageBus","onMessage","parse","data","send","senderId","location","updateLocation","start","statusText","frameBorder","scrolling","marginHeight","marginWidth","seamless","__importDefault","containers_1"],"sourceRoot":""}