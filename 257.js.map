{"version":3,"file":"257.js","mappings":"6LAKO,MAAMA,EAAS,IAAIC,EAAAA,GAAe,GAAEC,SAASC,kBAAmB,CACrEC,QAAS,CACP,IAISC,GAAgBC,EAAAA,EAAAA,IAAa,CACxCC,IAAM,GAAE,CAAE,SAAU,QAASL,SAASM,WAAa,UAAUN,SAASO,OACpEP,SAASC,0B,uICFTO,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKnB,QAAe,KAAW,IAAQM,OAAS,IAAQA,YAASC,ECjBnE,MAAMC,EACJlB,OAASA,EACTK,cAAgBA,EAGlB,MAAMc,EAAOC,EAAAA,EAAI;;;;;;EAQXC,EAA0BD,EAAAA,EAAI;;;;;;EAqB9BE,EAAU,IAbT,cAAyBJ,EAC9BK,IAAAA,GACE,OAAOC,EAAAA,EAAAA,GAAKC,KAAKzB,OAAO0B,QAAQP,IAAOQ,MACrCC,EAAAA,EAAAA,IAAI,EAAGC,KAAON,WAAaA,IAE/B,CACAO,qBAAAA,GACE,OAAON,EAAAA,EAAAA,GAAKC,KAAKzB,OAAO0B,QAAQL,IAA0BM,MACxDC,EAAAA,EAAAA,IAAI,EAAGC,KAAOE,yBAA2BA,IAE7C,GAqBa,SAASC,IACtB,MAAM,KAAEC,EAAI,KAAEV,GAjBT,WACL,MAAOU,EAAMC,IAAWC,EAAAA,EAAAA,WAA+B,IAAM,KAM7D,OAJAC,EAAAA,EAAAA,YAAU,KACRd,EAAQQ,wBAAwBO,WAAWJ,GAASC,EAAQD,IAAM,GACjE,IAEI,CACLA,OACAV,MAAMe,EAAAA,EAAAA,cACJ,IAAMhB,EAAQC,OAAOc,WAAWJ,GAASC,EAAQD,MACjD,IAGN,CAGyBM,GAEvB,OACEC,EAAAA,cAAA,OAAKC,UAAWC,EAAOV,SACrBQ,EAAAA,cAAA,UAAI,OACHP,GACCO,EAAAA,cAAA,aACEA,EAAAA,cAAA,aACEA,EAAAA,cAAA,UACEA,EAAAA,cAAA,UAAI,QACJA,EAAAA,cAAA,UAAI,OACJA,EAAAA,cAAA,UAAI,WACJA,EAAAA,cAAA,UAAI,gBACJA,EAAAA,cAAA,UAAI,WACJA,EAAAA,cAAA,UAAI,aAELP,EAAKL,KAAI,CAACe,EAAMC,IACfJ,EAAAA,cAAA,MAAII,IAAKA,GACPJ,EAAAA,cAAA,UAAKG,EAAKE,MACVL,EAAAA,cAAA,UAAKG,EAAKG,KACVN,EAAAA,cAAA,UAAKG,EAAKI,SACVP,EAAAA,cAAA,UAAKG,EAAKK,cACVR,EAAAA,cAAA,UAAKG,EAAKM,SACVT,EAAAA,cAAA,UAAKG,EAAKO,eAMpBV,EAAAA,cAAA,UAAQW,QAASA,IAAM5B,KAAQ,QAC/BiB,EAAAA,cAAA,WAAMY,KAAKC,UAAUpB,EAAM,KAAM,IAGvC,C,sEC5FIqB,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,qLAAsL,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,wDAAwD,MAAQ,GAAG,SAAW,uEAAuE,eAAiB,CAAC,yKAAyK,WAAa,MAEvlBH,EAAwBtC,OAAS,CAChC,QAAW,wBAEZ,S","sources":["webpack://@dev/web/../client/src/index.ts","webpack://@dev/web/../lan/src/containers/styles.module.scss?a9ae","webpack://@dev/web/../lan/src/containers/index.tsx","webpack://@dev/web/../lan/src/containers/styles.module.scss"],"sourcesContent":["import { GraphQLClient } from \"graphql-request\";\nimport { createClient } from \"graphql-ws\";\n\n// https://shammelburg.medium.com/subscriptions-with-graphql-dfa8279af050\n// https://github.com/shammelburg/graphql-rxjs-angular/blob/main/src/app/services/graphql.service.ts\nexport const client = new GraphQLClient(`${location.pathname}graphql`, {\n  headers: {\n    // authorization: `Bearer ${localStorage.getItem('token')}`,\n  },\n});\n\nexport const subscriptions = createClient({\n  url: `${{ \"https:\": \"wss:\" }[location.protocol] || \"ws:\"}//${location.host}${\n    location.pathname\n  }subscriptions`,\n});\n","\n      import API from \"!../../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.90.3/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.90.3/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.90.3/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.90.3/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.90.3/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.90.3/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/.pnpm/css-loader@6.10.0_webpack@5.90.3/node_modules/css-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@14.1.1_sass@1.72.0_webpack@5.90.3/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/.pnpm/css-loader@6.10.0_webpack@5.90.3/node_modules/css-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@14.1.1_sass@1.72.0_webpack@5.90.3/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { gql } from \"graphql-request\";\nimport { from } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { client, subscriptions } from \"@dev/client\";\nimport styles from \"./styles.module.scss\";\n\nimport type { WiFiNetwork } from \"node-wifi\";\n\nclass Service {\n  client = client;\n  subscriptions = subscriptions;\n}\n\nconst SCAN = gql`\n  query ScanQuery {\n    lan {\n      scan\n    }\n  }\n`;\n\nconst GET_CURRENT_CONNECTIONS = gql`\n  query GetCurrentConnectionsQuery {\n    lan {\n      currentConnections\n    }\n  }\n`;\n\nexport class LanService extends Service {\n  scan() {\n    return from(this.client.request(SCAN)).pipe(\n      map(({ lan: { scan } }) => scan),\n    );\n  }\n  getCurrentConnections() {\n    return from(this.client.request(GET_CURRENT_CONNECTIONS)).pipe(\n      map(({ lan: { currentConnections } }) => currentConnections),\n    );\n  }\n}\n\nconst service = new LanService();\n\nexport function useService() {\n  const [data, setData] = useState<WiFiNetwork[] | null>(() => []);\n\n  useEffect(() => {\n    service.getCurrentConnections().subscribe((data) => setData(data));\n  }, []);\n\n  return {\n    data,\n    scan: useCallback(\n      () => service.scan().subscribe((data) => setData(data)),\n      [],\n    ),\n  };\n}\n\nexport default function Section() {\n  const { data, scan } = useService();\n\n  return (\n    <div className={styles.Section}>\n      <h2>Lan</h2>\n      {data && (\n        <table>\n          <tbody>\n            <tr>\n              <th>ssid</th>\n              <th>mac</th>\n              <th>channel</th>\n              <th>signal_level</th>\n              <th>quality</th>\n              <th>security</th>\n            </tr>\n            {data.map((item, key) => (\n              <tr key={key}>\n                <td>{item.ssid}</td>\n                <td>{item.mac}</td>\n                <td>{item.channel}</td>\n                <td>{item.signal_level}</td>\n                <td>{item.quality}</td>\n                <td>{item.security}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n      <button onClick={() => scan()}>scan</button>\n      <pre>{JSON.stringify(data, null, 2)}</pre>\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@6.10.0_webpack@5.90.3/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@6.10.0_webpack@5.90.3/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jnL5aDk4hheBE_J1TFdb{color:green}.jnL5aDk4hheBE_J1TFdb table{border-collapse:collapse;width:100%}.jnL5aDk4hheBE_J1TFdb th,.jnL5aDk4hheBE_J1TFdb td{padding:.25em;text-align:left}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../lan/src/containers/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,WAAA,CAEA,4BACE,wBAAA,CACA,UAAA,CAEF,kDAEE,aAAA,CACA,eAAA\",\"sourcesContent\":[\".Section {\\n  color: green;\\n\\n  table {\\n    border-collapse: collapse;\\n    width: 100%;\\n  }\\n  th,\\n  td {\\n    padding: 0.25em;\\n    text-align: left;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": `jnL5aDk4hheBE_J1TFdb`\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["client","GraphQLClient","location","pathname","headers","subscriptions","createClient","url","protocol","host","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","undefined","Service","SCAN","gql","GET_CURRENT_CONNECTIONS","service","scan","from","this","request","pipe","map","lan","getCurrentConnections","currentConnections","Section","data","setData","useState","useEffect","subscribe","useCallback","useService","React","className","styles","item","key","ssid","mac","channel","signal_level","quality","security","onClick","JSON","stringify","___CSS_LOADER_EXPORT___","push","module","id"],"sourceRoot":""}