"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[14],{14014(e,t,n){n.r(t),n.d(t,{default:()=>g});var a=n(10162),l=n(24348),r=n(63638),c=n(14291),s=n(79101),i=n(57315);const u={search:""},o=({search:e,...t})=>JSON.stringify({...t,search:e.toLowerCase().trim()});function m({setQueries:e}){const[t,n]=(0,a.useState)(u),l=(0,a.useMemo)(()=>new r.B,[]);return(0,a.useEffect)(()=>{const t=l.pipe((0,c.T)(o),(0,s.F)(),(0,i.B)(400)).subscribe(t=>e(e=>({...e,...JSON.parse(t)})));return()=>t.unsubscribe()},[l]),(0,a.useEffect)(()=>{l.next(t)},[t]),a.createElement("div",null,a.createElement("input",{type:"search",value:t.search,onChange:(0,a.useCallback)(({target:e})=>n(t=>({...t,search:e.value})),[])}))}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(null,arguments)}const f=({title:e,onPress:t,...n})=>a.createElement("a",p({href:"#",onClick:t?e=>(e.preventDefault(),t(e)):void 0},n),e),d="div";function h(){return a.createElement(d,null,a.createElement("div",null,"Loading..."))}function E({data:e,expanded:t=!1}){const[n,l]=(0,a.useState)(t);return a.createElement("pre",null,n?JSON.stringify(e,null,2):a.createElement(a.Fragment,null,"[",a.createElement("a",{href:"#",onClick:e=>(e.preventDefault(),l(!0))},"..."),"]"))}function b({version:e=1}){const[t,n]=(0,a.useState)([]),[r,c]=(0,a.useState)(),[s,i]=(0,a.useState)(),p=(0,l.DY)(async()=>(await fetch(`api/audio?${e}`)).json(),[e]),[h,b]=(0,a.useState)(()=>JSON.parse(o(u))),g=(0,a.useCallback)(({target:e})=>{return t=e.value,n(n=>e.checked?n.concat(t):n.filter(e=>e!==t));var t},[]),k=(0,a.useMemo)(()=>(p||[]).map(({name:e,...t})=>({...t,name:e,href:`/api/audio/${encodeURIComponent(e)}`})),[p]),v=(0,a.useCallback)(e=>(({name:e,href:t,title:n,album:a,artists:l,artwork:r})=>(c(t),i(Object.assign(n?{title:n,album:a,artist:l.join(", ")}:{title:e},r&&{artwork:r.map(({src:e,...n})=>({src:new URL(`${t}/${e}`,document.location.origin||"").toString(),...n}))})),fetch(`api/player/play/${encodeURIComponent(e)}`)))(k.find(t=>t.href===e)),[k]),y=(0,a.useCallback)(()=>{console.log(["onStop"]),c(void 0),fetch("api/player/stop")},[]),C=r,w=(0,a.useMemo)(()=>k.filter(e=>e.name.toLocaleLowerCase().includes(h.search)),[k,h]);return console.log({filtered:w,list:k,meta:s}),a.createElement(d,null,a.createElement(m,{setQueries:b}),a.createElement("ul",null,w.map(({name:e,href:l,title:r,artists:c,picture:s},i)=>a.createElement("li",{key:i,style:{display:"flex",flexDirection:"row",padding:1,alignItems:"center",background:l===C?"aliceblue":""}},a.createElement("input",{type:"checkbox",value:l,checked:t.includes(l),onChange:g}),s&&s.map((e,t)=>a.createElement("img",{key:t,src:e,width:"50",height:"50"})),a.createElement(f,{style:{padding:4},title:r?`${c.join(", ")} - ${r}`:e,onPress:()=>(n([l]),v(l))})))),a.createElement("button",{onClick:y},"stop"),a.createElement(E,{data:p}))}function g(){return a.createElement(d,null,a.createElement("div",null,"API_URL: "),a.createElement(a.Suspense,{fallback:a.createElement(h,null)},a.createElement(b,null)))}}}]);
//# sourceMappingURL=14.js.map