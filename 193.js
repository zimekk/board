"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[193],{44818:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Receiver=void 0;var i=l(n(22155)),o="urn:x-cast:com.url.cast",c=function(e,t){void 0===t&&(t="text/javascript");var n=Object.assign(document.createElement("script"),{type:t,src:e});document.head.appendChild(n)};function s(){var e=(0,i.useState)(!1),t=e[0],n=e[1],a=(0,i.useRef)(!1),r=(0,i.useRef)(null),l=(0,i.useRef)(null),s=(0,i.useRef)(null);function u(e){e||(r.current=null,n(!1)),console.log("Session is alive?: ",e)}function d(e,t){console.log("Receiver said: "+t)}function f(e){console.log("New session ID:"+e.sessionId),r.current=e,r.current.addUpdateListener(u),r.current.addMessageListener(o,d),n(!0)}function v(e){console.log("Err: "+JSON.stringify(e))}var m=(0,i.useCallback)((function(){chrome.cast.requestSession(f,console.info)}),[]),p=(0,i.useCallback)((function(){var e,t=s.current.value,i=l.current.value;t&&i&&(e={type:i,url:t},!a.current&&r.current&&(r.current.sendMessage(o,e,(function(){console.log("Message sent: ",e)}),v),"loc"===e.type&&(a.current=!0,n(!1))))}),[]);return(0,i.useEffect)((function(){function e(e){"available"===e?console.log("receiver found"):console.log("no receivers found")}c("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),window.__onGCastApiAvailable=function(t){console.log(["__onGCastApiAvailable"],{loaded:t}),t&&function(){var t=new chrome.cast.SessionRequest("5CB45E5A"),n=new chrome.cast.ApiConfig(t,f,e);chrome.cast.initialize(n,function(e){console.log("Sucess: "+e)}.bind(this,"initialized ok"),v)}()}}),[]),i.default.createElement("div",null,i.default.createElement("button",{onClick:m},"Start cast session"),i.default.createElement("p",{id:"step2",className:"notready"},"Step 2: Send url"),i.default.createElement("input",{ref:s,id:"url",className:"border",type:"text",placeholder:"e.g. http://example.com",size:30,defaultValue:"https://www.windytv.com/",disabled:!t}),i.default.createElement("select",{ref:l,id:"type",defaultValue:"loc",disabled:!t},i.default.createElement("option",{value:"iframe"},"iframe"),i.default.createElement("option",{value:"loc"},"location")),i.default.createElement("button",{id:"send",disabled:!t,onClick:p},"send"),i.default.createElement("h3",null,"Details"),i.default.createElement("p",null,"There are two methods for casting, with pros and cons:"),i.default.createElement("ol",null,i.default.createElement("li",null,"Load an iframe (You will have trouble loading a url with x-frame-options: same origin.)"),i.default.createElement("li",null,"Change the window location (You will lose control when you load the url over the receiver.)")),i.default.createElement("p",null,"Also, notice the chromecast viewport is 1280x720 and the default background is black before the receiver loads."),i.default.createElement("p",null,i.default.createElement("a",{href:"https://github.com/DeMille/url-cast-receiver",rel:"noopener noreferrer",target:"_blank"},"github.com/DeMille/url-cast-receiver")))}t.Receiver=function(){var e=(0,i.useRef)(null);return(0,i.useEffect)((function(){c("//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"),window.castReceiverManager=cast.receiver.CastReceiverManager.getInstance(),window.castReceiverManager.onReady=function(e){window.castReceiverManager.setApplicationState("URL Cast ready...")},window.messageBus=window.castReceiverManager.getCastMessageBus("urn:x-cast:com.url.cast"),window.messageBus.onMessage=function(t){var n,a=JSON.parse(t.data);window.messageBus.send(t.senderId,"ok"),"iframe"===a.type&&(n=a.url,window.castReceiverManager.setApplicationState("Now Playing: "+n),e.current.src=n),"loc"===a.type&&function(e){window.castReceiverManager.setApplicationState("Now Playing: "+e),window.location.href=e}(a.url)},window.castReceiverManager.start({statusText:"URL Cast starting..."})}),[]),i.default.createElement("iframe",{ref:e,src:"",frameBorder:"0",scrolling:"no",marginHeight:0,marginWidth:0,seamless:!0,id:"iframe"})},t.default=function(){return i.default.createElement("section",null,i.default.createElement("h2",null,"Cast Receiver"),i.default.createElement(s,null))}},64193:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44818);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(r).default}})}}]);
//# sourceMappingURL=193.js.map