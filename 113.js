"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[113],{43113:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(66411),l=n(39430);const o=e=>Number.isFinite(e)?e:0;const i=e=>0===e||0n===e,a=(e,t)=>1===t||1n===t?e:`${e}s`,s=1e-7,c=86400000n;function u(e,t){const n="bigint"==typeof e;if(!n&&!Number.isFinite(e))throw new TypeError("Expected a finite number or bigint");const r=e<0?"-":"";e=e<0?-e:e,(t={...t}).colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.unitCount=1,t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);let l=[];const u=(e,n,r,o)=>{if(0!==l.length&&t.colonNotation||!i(e)||t.colonNotation&&"m"===r){if(o??=String(e),t.colonNotation){const e=o.includes(".")?o.split(".")[0].length:o.length,t=l.length>0?2:1;o="0".repeat(Math.max(0,t-e))+o}else o+=t.verbose?" "+a(n,e):r;l.push(o)}},m=function(e){switch(typeof e){case"number":if(Number.isFinite(e))return function(e){return{days:Math.trunc(e/864e5),hours:Math.trunc(e/36e5%24),minutes:Math.trunc(e/6e4%60),seconds:Math.trunc(e/1e3%60),milliseconds:Math.trunc(e%1e3),microseconds:Math.trunc(o(1e3*e)%1e3),nanoseconds:Math.trunc(o(1e6*e)%1e3)}}(e);break;case"bigint":return function(e){return{days:e/86400000n,hours:e/3600000n%24n,minutes:e/60000n%60n,seconds:e/1000n%60n,milliseconds:e%1000n,microseconds:0n,nanoseconds:0n}}(e)}throw new TypeError("Expected a finite number or bigint")}(e),d=BigInt(m.days);if(t.hideYearAndDays?u(24n*BigInt(d)+BigInt(m.hours),"hour","h"):(t.hideYear?u(d,"day","d"):(u(d/365n,"year","y"),u(d%365n,"day","d")),u(Number(m.hours),"hour","h")),u(Number(m.minutes),"minute","m"),!t.hideSeconds)if(t.separateMilliseconds||t.formatSubMilliseconds||!t.colonNotation&&e<1e3&&!t.subSecondsAsDecimals){const e=Number(m.seconds),n=Number(m.milliseconds),r=Number(m.microseconds),l=Number(m.nanoseconds);if(u(e,"second","s"),t.formatSubMilliseconds)u(n,"millisecond","ms"),u(r,"microsecond","µs"),u(l,"nanosecond","ns");else{const e=n+r/1e3+l/1e6,o="number"==typeof t.millisecondsDecimalDigits?t.millisecondsDecimalDigits:0,i=e>=1?Math.round(e):Math.ceil(e),a=o?e.toFixed(o):i;u(Number.parseFloat(a),"millisecond","ms",a)}}else{const r=((e,t)=>{const n=Math.floor(e*10**t+s);return(Math.round(n)/10**t).toFixed(t)})((n?Number(e%c):e)/1e3%60,"number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1),l=t.keepDecimalsOnWholeSeconds?r:r.replace(/\.0+$/,"");u(Number.parseFloat(l),"second","s",l)}if(0===l.length)return r+"0"+(t.verbose?" milliseconds":"ms");const f=t.colonNotation?":":" ";return"number"==typeof t.unitCount&&(l=l.slice(0,Math.max(t.unitCount,1))),r+l.join(f)}var m=n(56805),d=n(67371),f=n.n(d);const h=[];function p(e,t,n,r=0,l=!1){for(const e of t)if(f()(n,e.args)){if(l)return;if(e.error)throw e.error;if(e.response)return e.response;throw e.promise}const o={args:n,promise:e(...n).then(e=>o.response=null==e||e).catch(e=>o.error=null!=e?e:"unknown error").then(()=>{r>0&&setTimeout(()=>{const e=t.indexOf(o);-1!==e&&t.splice(e,1)},r)})};if(t.push(o),!l)throw o.promise}function b(e,...t){if(void 0===t||0===t.length)e.splice(0,e.length);else{const n=e.find(e=>f()(t,e.args));if(n){const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}}function g(e,...t){return p(e,h,t,g.lifespan)}g.lifespan=0,g.clear=(...e)=>b(h,...e),g.preload=(e,...t)=>{p(e,h,t,g.lifespan,!0)},g.peek=(...e)=>{var t;return null==(t=h.find(t=>f()(e,t.args)))?void 0:t.response};const E=e=>Number((((e.map(e=>e.split(/\s+/)).find(e=>e[5].match(/hostname/))||[])[4]||"").match(/^(\d+)%/)||[])[1]),y=(({hostname:e,protocol:t})=>`${t}//${e}:9001`)(new URL(`${window.location.href}`.replace(/^mqtt:\/\//,"ws://"))),M=function(e,t=0){const n=[];return{read:(...r)=>p(e,n,r,t),preload:(...r)=>{p(e,n,r,t,!0)},clear:(...e)=>b(n,...e),peek:(...e)=>{var t;return null==(t=n.find(t=>f()(e,t.args)))?void 0:t.response}}}(()=>fetch("status").then(e=>e.json()).then(({result:e})=>e).catch(e=>(console.error(e),{databases:[],usage:[],cpus:[],hostname:null,platform:null,type:null,loadavg:null,freemem:0,totalmem:0,uptime:0})));function v(){const[e,t]=(0,l.useState)({});return(0,l.useEffect)(()=>{const e=r.A.connect(y);return console.log({MQTT_URL:y}),e.on("connect",()=>{e.subscribe("status",e=>{})}),e.on("message",(e,n)=>{const r=JSON.parse(n.toString());t(e=>({...e,[r.hostname]:r}))}),()=>{e.end()}},[]),l.createElement("div",null,l.createElement("a",{href:"http://www.emqx.io/online-mqtt-client",rel:"noopener noreferrer",target:"_blank"},"online-mqtt-client"),l.createElement("pre",null,JSON.stringify(e,null,2)))}function N(){const e=M.read();return console.log({result:e}),console.log({total:E(e.usage)}),l.createElement("section",null,l.createElement("h2",null,"Status"),l.createElement(v,null),l.createElement("h3",null,"databases"),l.createElement("table",null,l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"name"),l.createElement("th",null,"size")),e.databases.map(({name:e,size:t},n)=>l.createElement("tr",{key:n},l.createElement("td",null,e),l.createElement("td",null,t))))),l.createElement("h3",null,"disks"),l.createElement("table",null,l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"filesystem"),l.createElement("th",null,"size"),l.createElement("th",null,"used"),l.createElement("th",null,"avail"),l.createElement("th",null,"capacity")),e.usage.map((e,t)=>l.createElement("tr",{key:t},l.createElement("td",{colSpan:5},e))))),l.createElement("h3",null,"cpus"),l.createElement("table",null,l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"model"),l.createElement("th",null,"speed"),l.createElement("th",null,"times")),e.cpus.map(({model:e,speed:t,times:n},r)=>l.createElement("tr",{key:r},l.createElement("td",null,e),l.createElement("td",null,t),l.createElement("td",null,l.createElement("pre",null,JSON.stringify(n,null,2))))))),l.createElement("h3",null,"host"),l.createElement("table",null,l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"hostname"),l.createElement("th",null,"platform"),l.createElement("th",null,"type"),l.createElement("th",null,"loadavg")),[e].map(({hostname:e,platform:t,type:n,loadavg:r},o)=>l.createElement("tr",{key:o},l.createElement("td",null,e),l.createElement("td",null,t),l.createElement("td",null,n),l.createElement("td",null,l.createElement("pre",null,JSON.stringify(r,null,2))))))),l.createElement("h3",null,"mem"),l.createElement("table",null,l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"freemem"),l.createElement("th",null,"totalmem"),l.createElement("th",null,"usage")),[e].map(({freemem:e,totalmem:t},n)=>l.createElement("tr",{key:n},l.createElement("td",null,(0,m.A)(e)),l.createElement("td",null,(0,m.A)(t)),l.createElement("td",null,(0,m.A)(t-e)))))),l.createElement("h3",null,"uptime"),l.createElement("table",null,l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"uptime")),[e].map(({uptime:e},t)=>l.createElement("tr",{key:t},l.createElement("td",null,u(1e3*e)))))),l.createElement("pre",null,JSON.stringify(e,null,2)))}},56805:(e,t,n)=>{n.d(t,{A:()=>f});const r=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],l=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],i=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],a=(e,t,n)=>{let r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r},s=e=>{if("number"==typeof e)return Math.log10(e);const t=e.toString(10);return t.length+Math.log10(`0.${t.slice(0,15)}`)},c=e=>"number"==typeof e?Math.log(e):s(e)*Math.log(10),u=(e,t)=>{if("number"==typeof e)return e/t;const n=e/BigInt(t),r=e%BigInt(t);return Number(n)+Number(r)/t},m=(e,t)=>{if(void 0===t)return e;if("number"!=typeof t||!Number.isSafeInteger(t)||t<0)throw new TypeError(`Expected fixedWidth to be a non-negative integer, got ${typeof t}: ${t}`);return 0===t?e:e.length<t?e.padStart(t," "):e},d=e=>{const{minimumFractionDigits:t,maximumFractionDigits:n}=e;if(void 0!==t||void 0!==n)return{...void 0!==t&&{minimumFractionDigits:t},...void 0!==n&&{maximumFractionDigits:n},roundingMode:"trunc"}};function f(e,t){if("bigint"!=typeof e&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t={bits:!1,binary:!1,space:!0,nonBreakingSpace:!1,...t}).bits?t.binary?i:o:t.binary?l:r,f=t.space?t.nonBreakingSpace?" ":" ":"",h="number"==typeof e?0===e:0n===e;if(t.signed&&h){const e=` 0${f}${n[0]}`;return m(e,t.fixedWidth)}const p=e<0,b=p?"-":t.signed?"+":"";p&&(e=-e);const g=d(t);let E;if(e<1)E=b+a(e,t.locale,g)+f+n[0];else{const r=Math.min(Math.floor(t.binary?c(e)/Math.log(1024):s(e)/3),n.length-1);if(e=u(e,(t.binary?1024:1e3)**r),!g){const t=Math.max(3,Math.floor(e).toString().length);e=e.toPrecision(t)}E=b+a(Number(e),t.locale,g)+f+n[r]}return m(E,t.fixedWidth)}},67371:e=>{e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,l,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(l=r;0!==l--;)if(!e(t[l],n[l]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(l=r;0!==l--;)if(!Object.prototype.hasOwnProperty.call(n,o[l]))return!1;for(l=r;0!==l--;){var i=o[l];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n}}}]);
//# sourceMappingURL=113.js.map