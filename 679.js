"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[679],{8679:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(2983),a=n(1534),l=n.n(a),s=n(6256);const c=s.z.object({live:s.z.record(s.z.object({publisher:s.z.object({app:s.z.string(),stream:s.z.string(),clientId:s.z.string(),connectCreated:s.z.string(),bytes:s.z.number(),ip:s.z.string(),audio:s.z.object({codec:s.z.string(),profile:s.z.string(),samplerate:s.z.number(),channels:s.z.number()}).nullable(),video:s.z.object({codec:s.z.string(),width:s.z.number(),height:s.z.number(),profile:s.z.string(),level:s.z.number(),fps:s.z.number()})}),subscribers:s.z.array(s.z.unknown())})).optional()}),o=(({protocol:e,hostname:t})=>`${e}//${t}:7000`)(new URL(window.location.href));function i({stream:e}){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{if(l().isSupported()){const n=t.current,r=l().createPlayer({type:"flv",url:e});r.attachMediaElement(n),r.load()}}),[e]),r.createElement("div",null,r.createElement("video",{ref:t,width:"480",height:"270",autoPlay:!0,controls:!0}))}function u(){const[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(null);(0,r.useEffect)((()=>{fetch(`${o}/api/streams`,{headers:{Authorization:`Basic ${btoa(["admin","admin"].join(":"))}`}}).then((e=>e.json())).then(c.parseAsync).then((e=>Object.keys(e.live||{}).map((e=>`${o}/live/${e}.flv`)))).then((e=>e.length>0&&(t(e),a(e[0]))))}),[]);const l=(0,r.useCallback)((({target:e})=>a(e.value)),[]);return r.createElement("section",null,r.createElement("h2",null,"Stream"),n&&e&&r.createElement("select",{value:n,onChange:l},e.map((e=>r.createElement("option",{key:e,value:e},e)))),n&&r.createElement(i,{stream:n}),r.createElement("a",{href:`${o}/admin/streams`,target:"_blank"},"streams"))}console.log({MEDIA_URL:o})}}]);
//# sourceMappingURL=679.js.map