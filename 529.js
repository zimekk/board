"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[529],{1529:(e,t,l)=>{l.r(t),l.d(t,{default:()=>d});var n=l(5505),a=l(2983),r=l(5407),m=l(939),c=l(865);const u=e=>Number((((e.map((e=>e.split(/\s+/))).find((e=>e[5].match(/hostname/)))||[])[4]||"").match(/^(\d+)%/)||[])[1]),E=(({hostname:e,protocol:t})=>`${t}//${e}:9001`)(new URL(`${window.location.href}`.replace(/^mqtt:\/\//,"ws://"))),s=(0,c.k)((()=>fetch("status").then((e=>e.json())).then((({result:e})=>e)).catch((e=>(console.error(e),{databases:[],usage:[],cpus:[],hostname:null,platform:null,type:null,loadavg:null,freemem:0,totalmem:0,uptime:0})))));function o(){const[e,t]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=n.Z.connect(E);return console.log({MQTT_URL:E}),e.on("connect",(()=>{e.subscribe("status",(e=>{}))})),e.on("message",((e,l)=>{const n=JSON.parse(l.toString());t(n)})),()=>{e.end()}}),[]),a.createElement("pre",null,JSON.stringify(e,null,2))}function d(){const e=s.read();return console.log({result:e}),console.log({total:u(e.usage)}),a.createElement("section",null,a.createElement("h2",null,"Status"),a.createElement(o,null),a.createElement("h3",null,"databases"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,"name"),a.createElement("th",null,"size")),e.databases.map((({name:e,size:t},l)=>a.createElement("tr",{key:l},a.createElement("td",null,e),a.createElement("td",null,t)))))),a.createElement("h3",null,"disks"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,"filesystem"),a.createElement("th",null,"size"),a.createElement("th",null,"used"),a.createElement("th",null,"avail"),a.createElement("th",null,"capacity")),e.usage.map(((e,t)=>a.createElement("tr",{key:t},a.createElement("td",{colSpan:5},e)))))),a.createElement("h3",null,"cpus"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,"model"),a.createElement("th",null,"speed"),a.createElement("th",null,"times")),e.cpus.map((({model:e,speed:t,times:l},n)=>a.createElement("tr",{key:n},a.createElement("td",null,e),a.createElement("td",null,t),a.createElement("td",null,a.createElement("pre",null,JSON.stringify(l,null,2)))))))),a.createElement("h3",null,"host"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,"hostname"),a.createElement("th",null,"platform"),a.createElement("th",null,"type"),a.createElement("th",null,"loadavg")),[e].map((({hostname:e,platform:t,type:l,loadavg:n},r)=>a.createElement("tr",{key:r},a.createElement("td",null,e),a.createElement("td",null,t),a.createElement("td",null,l),a.createElement("td",null,a.createElement("pre",null,JSON.stringify(n,null,2)))))))),a.createElement("h3",null,"mem"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,"freemem"),a.createElement("th",null,"totalmem"),a.createElement("th",null,"usage")),[e].map((({freemem:e,totalmem:t},l)=>a.createElement("tr",{key:l},a.createElement("td",null,(0,m.Z)(e)),a.createElement("td",null,(0,m.Z)(t)),a.createElement("td",null,(0,m.Z)(t-e))))))),a.createElement("h3",null,"uptime"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,"uptime")),[e].map((({uptime:e},t)=>a.createElement("tr",{key:t},a.createElement("td",null,(0,r.Z)(1e3*e))))))),a.createElement("pre",null,JSON.stringify(e,null,2)))}}}]);
//# sourceMappingURL=529.js.map