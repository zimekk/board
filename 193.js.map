{"version":3,"file":"193.js","mappings":"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","sources":["webpack://@dev/web/../cast/lib/containers/index.js","webpack://@dev/web/../cast/lib/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Receiver = Receiver;\nexports.default = Section;\n// import mqtt from \"mqtt\";\nvar react_1 = __importStar(require(\"react\"));\nvar applicationID = \"5CB45E5A\", namespace = \"urn:x-cast:com.url.cast\";\n// , receiverDead = false\n// , session = null;\nvar injectScript = function (src, type) {\n    if (type === void 0) { type = \"text/javascript\"; }\n    var script = Object.assign(document.createElement(\"script\"), {\n        type: type,\n        src: src,\n    });\n    document.head.appendChild(script);\n};\nfunction Receiver() {\n    var iframeRef = (0, react_1.useRef)(null);\n    // Update the iframe src\n    // warning: watch out for X-Frame-Options -> DENY\n    function updateFrame(url) {\n        window.castReceiverManager.setApplicationState(\"Now Playing: \" + url);\n        // document.getElementById('iframe').src = url;\n        iframeRef.current.src = url;\n    }\n    // Set the window location to the URL\n    // warning: this reciever dies essentially, because you navigated away\n    function updateLocation(url) {\n        window.castReceiverManager.setApplicationState(\"Now Playing: \" + url);\n        window.location.href = url;\n    }\n    (0, react_1.useEffect)(function () {\n        injectScript(\"//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js\");\n        window.castReceiverManager =\n            cast.receiver.CastReceiverManager.getInstance();\n        window.castReceiverManager.onReady = function (event) {\n            window.castReceiverManager.setApplicationState(\"URL Cast ready...\");\n        };\n        // messages on a custom namespace\n        var ns = \"urn:x-cast:com.url.cast\";\n        window.messageBus = window.castReceiverManager.getCastMessageBus(ns);\n        window.messageBus.onMessage = function (e) {\n            var msg = JSON.parse(e.data);\n            window.messageBus.send(e.senderId, \"ok\");\n            if (msg.type === \"iframe\")\n                updateFrame(msg.url);\n            if (msg.type === \"loc\")\n                updateLocation(msg.url);\n        };\n        // initialize CastReceiverManager\n        window.castReceiverManager.start({ statusText: \"URL Cast starting...\" });\n    }, []);\n    return (react_1.default.createElement(\"iframe\", { ref: iframeRef, src: \"\", frameBorder: \"0\", scrolling: \"no\", marginHeight: 0, marginWidth: 0, seamless: true, id: \"iframe\" }));\n}\nfunction Sender() {\n    var _a = (0, react_1.useState)(false), enabled = _a[0], setEnabled = _a[1];\n    var receiverDeadRef = (0, react_1.useRef)(false);\n    var sessionRef = (0, react_1.useRef)(null);\n    var typeRef = (0, react_1.useRef)(null);\n    var urlRef = (0, react_1.useRef)(null);\n    function sessionUpdateListener(isAlive) {\n        if (!isAlive) {\n            // session = null;\n            sessionRef.current = null;\n            // disableInputs();\n            setEnabled(false);\n        }\n        console.log(\"Session is alive?: \", isAlive);\n    }\n    function receiveMessage(namespace, msg) {\n        // namespace = 'urn:x-cast:com.url.cast'\n        // it only ever says 'ok' - just confirming when a url has been received\n        console.log(\"Receiver said: \" + msg);\n    }\n    function sessionListener(newSession) {\n        console.log(\"New session ID:\" + newSession.sessionId);\n        // session = newSession;\n        sessionRef.current = newSession;\n        sessionRef.current.addUpdateListener(sessionUpdateListener);\n        sessionRef.current.addMessageListener(namespace, receiveMessage);\n        // enableInputs();\n        setEnabled(true);\n    }\n    function onErr(err) {\n        console.log(\"Err: \" + JSON.stringify(err));\n        // showError(err);\n    }\n    var handleRequestSession = (0, react_1.useCallback)(function () {\n        chrome.cast.requestSession(sessionListener, console.info);\n    }, []);\n    function sendMessage(msg) {\n        if (receiverDeadRef.current || !sessionRef.current)\n            return;\n        // send msg\n        sessionRef.current.sendMessage(namespace, msg, function () {\n            console.log(\"Message sent: \", msg);\n            // notify('Message sent: ' + JSON.stringify(msg));\n        }, onErr);\n        if (msg.type === \"loc\") {\n            receiverDeadRef.current = true;\n            // disableInputs();\n            setEnabled(false);\n            // notify('Receiver will now be unresponsive');\n        }\n    }\n    var handleSend = (0, react_1.useCallback)(function () {\n        // var url = document.getElementById('url').value\n        //   , type = document.getElementById('type').value;\n        var url = urlRef.current.value, type = typeRef.current.value;\n        if (!url || !type)\n            return;\n        sendMessage({ type: type, url: url });\n    }, []);\n    (0, react_1.useEffect)(function () {\n        injectScript(\"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js\");\n        function receiverListener(e) {\n            e === \"available\"\n                ? console.log(\"receiver found\")\n                : console.log(\"no receivers found\");\n        }\n        function initializeCastApi() {\n            var sessionRequest = new chrome.cast.SessionRequest(applicationID);\n            var apiConfig = new chrome.cast.ApiConfig(sessionRequest, sessionListener, receiverListener);\n            function onSuccess(msg) {\n                console.log(\"Sucess: \" + msg);\n            }\n            chrome.cast.initialize(apiConfig, onSuccess.bind(this, \"initialized ok\"), onErr);\n        }\n        // initialize\n        window.__onGCastApiAvailable = function (loaded) {\n            console.log([\"__onGCastApiAvailable\"], { loaded: loaded });\n            if (loaded)\n                initializeCastApi();\n        };\n    }, []);\n    return (react_1.default.createElement(\"div\", null,\n        react_1.default.createElement(\"button\", { onClick: handleRequestSession }, \"Start cast session\"),\n        react_1.default.createElement(\"p\", { id: \"step2\", className: \"notready\" }, \"Step 2: Send url\"),\n        react_1.default.createElement(\"input\", { ref: urlRef, id: \"url\", className: \"border\", type: \"text\", placeholder: \"e.g. http://example.com\", size: 30, defaultValue: \"https://www.windytv.com/\", disabled: !enabled }),\n        react_1.default.createElement(\"select\", { ref: typeRef, id: \"type\", defaultValue: \"loc\", disabled: !enabled },\n            react_1.default.createElement(\"option\", { value: \"iframe\" }, \"iframe\"),\n            react_1.default.createElement(\"option\", { value: \"loc\" }, \"location\")),\n        react_1.default.createElement(\"button\", { id: \"send\", disabled: !enabled, onClick: handleSend }, \"send\"),\n        react_1.default.createElement(\"h3\", null, \"Details\"),\n        react_1.default.createElement(\"p\", null, \"There are two methods for casting, with pros and cons:\"),\n        react_1.default.createElement(\"ol\", null,\n            react_1.default.createElement(\"li\", null, \"Load an iframe (You will have trouble loading a url with x-frame-options: same origin.)\"),\n            react_1.default.createElement(\"li\", null, \"Change the window location (You will lose control when you load the url over the receiver.)\")),\n        react_1.default.createElement(\"p\", null, \"Also, notice the chromecast viewport is 1280x720 and the default background is black before the receiver loads.\"),\n        react_1.default.createElement(\"p\", null,\n            react_1.default.createElement(\"a\", { href: \"https://github.com/DeMille/url-cast-receiver\", rel: \"noopener noreferrer\", target: \"_blank\" }, \"github.com/DeMille/url-cast-receiver\"))));\n}\nfunction Section() {\n    return (react_1.default.createElement(\"section\", null,\n        react_1.default.createElement(\"h2\", null, \"Cast Receiver\"),\n        react_1.default.createElement(Sender, null)));\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = void 0;\nvar containers_1 = require(\"./containers\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return __importDefault(containers_1).default; } });\n"],"names":["ownKeys","__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","getOwnPropertyNames","ar","prototype","hasOwnProperty","call","length","mod","result","i","exports","Receiver","iframeRef","react_1","useRef","useEffect","injectScript","window","castReceiverManager","cast","receiver","CastReceiverManager","getInstance","onReady","event","setApplicationState","messageBus","getCastMessageBus","onMessage","e","url","msg","JSON","parse","data","send","senderId","type","current","src","location","href","updateLocation","start","statusText","default","createElement","ref","frameBorder","scrolling","marginHeight","marginWidth","seamless","id","Sender","applicationID","namespace","script","assign","document","head","appendChild","_a","useState","enabled","setEnabled","receiverDeadRef","sessionRef","typeRef","urlRef","sessionUpdateListener","isAlive","console","log","receiveMessage","sessionListener","newSession","sessionId","addUpdateListener","addMessageListener","onErr","err","stringify","handleRequestSession","useCallback","chrome","requestSession","info","handleSend","sendMessage","receiverListener","__onGCastApiAvailable","loaded","sessionRequest","SessionRequest","apiConfig","ApiConfig","initialize","bind","initializeCastApi","onClick","className","placeholder","size","defaultValue","disabled","rel","target","__importDefault","containers_1"],"sourceRoot":""}