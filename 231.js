"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[231],{3231:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var n=r(22155),i=r(87073),o=r(63638),s=r(14291),l=r(79101),u=r(57315);const c={search:""},a=({search:e,...t})=>JSON.stringify({...t,search:e.toLowerCase().trim()}),h=()=>JSON.parse(a(c));function f({setQueries:e}){const[t,r]=(0,n.useState)(c),i=(0,n.useMemo)(()=>new o.B,[]);return(0,n.useEffect)(()=>{const t=i.pipe((0,s.T)(a),(0,l.F)(),(0,u.B)(400)).subscribe(t=>e(e=>({...e,...JSON.parse(t)})));return()=>t.unsubscribe()},[i]),(0,n.useEffect)(()=>{i.next(t)},[t]),n.createElement("div",null,n.createElement("input",{type:"search",value:t.search,onChange:(0,n.useCallback)(({target:e})=>r(t=>({...t,search:e.value})),[])}))}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(null,arguments)}const p=({title:e,onPress:t,...r})=>n.createElement("a",d({href:"#",onClick:t?e=>(e.preventDefault(),t(e)):void 0},r),e),v="div",b="div";function y(){return n.createElement(b,null,n.createElement(v,null,"Loading..."))}function m({data:e,expanded:t=!1}){const[r,i]=(0,n.useState)(t);return n.createElement("pre",null,r?JSON.stringify(e,null,2):n.createElement(n.Fragment,null,"[",n.createElement("a",{href:"#",onClick:e=>(e.preventDefault(),i(!0))},"..."),"]"))}const w="";function g({version:e=1}){const[t,r]=(0,n.useState)([]),[o,s]=(0,n.useState)(),[l,u]=(0,n.useState)(),c=(0,i.DY)(async()=>(await fetch(`${w?`${w}/`:""}api/audio?${e}`)).json(),[e]),[a,d]=(0,n.useState)(()=>h()),v=(0,n.useCallback)(({target:e})=>{return t=e.value,r(r=>e.checked?r.concat(t):r.filter(e=>e!==t));var t},[]),y=(0,n.useMemo)(()=>(c||[]).map(({name:e,...t})=>({...t,name:e,href:`${w}/api/audio/${encodeURIComponent(e)}`})),[c]),g=(0,n.useCallback)(e=>(({name:e,href:t,title:r,album:n,artists:i,artwork:o})=>(s(t),u(Object.assign(r?{title:r,album:n,artist:i.join(", ")}:{title:e},o&&{artwork:o.map(({src:e,...r})=>({src:new URL(`${t}/${e}`,document.location.origin||"").toString(),...r}))})),fetch(`api/player/play/${encodeURIComponent(e)}`)))(y.find(t=>t.href===e)),[y]),E=(0,n.useCallback)(()=>{console.log(["onStop"]),s(void 0),fetch("api/player/stop")},[]),S=o,k=(0,n.useMemo)(()=>y.filter(e=>e.name.toLocaleLowerCase().includes(a.search)),[y,a]);return console.log({filtered:k,list:y,meta:l}),n.createElement(b,null,n.createElement(f,{setQueries:d}),n.createElement("ul",null,k.map(({name:e,href:i,title:o,artists:s,picture:l},u)=>n.createElement("li",{key:u,style:{display:"flex",flexDirection:"row",padding:1,alignItems:"center",background:i===S?"aliceblue":""}},n.createElement("input",{type:"checkbox",value:i,checked:t.includes(i),onChange:v}),l&&l.map((e,t)=>n.createElement("img",{key:t,src:e,width:"50",height:"50"})),n.createElement(p,{style:{padding:4},title:o?`${s.join(", ")} - ${o}`:e,onPress:()=>(r([i]),g(i))})))),n.createElement("button",{onClick:E},"stop"),n.createElement(m,{data:c}))}function E(){return n.createElement(b,null,n.createElement(v,null,`API_URL: ${w}`),n.createElement(n.Suspense,{fallback:n.createElement(y,null)},n.createElement(g,null)))}},57315:(e,t,r)=>{r.d(t,{B:()=>d});var n=r(65959),i=function(e){function t(t,r){return e.call(this)||this}return(0,n.C6)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(64307).yU),o={setInterval:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=o.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,(0,n.fX)([e,t],(0,n.zs)(r))):setInterval.apply(void 0,(0,n.fX)([e,t],(0,n.zs)(r)))},clearInterval:function(e){var t=o.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},s=r(28827),l=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return(0,n.C6)(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),o.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&o.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,s.o)(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(i),u={now:function(){return(u.delegate||Date).now()},delegate:void 0},c=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=u.now,e}(),a=new(function(e){function t(t,r){void 0===r&&(r=c.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return(0,n.C6)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(c))(l),h=r(11183),f=r(91243);function d(e,t){return void 0===t&&(t=a),(0,h.N)(function(r,n){var i=null,o=null,s=null,l=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,n.next(e)}};function u(){var r=s+e,o=t.now();if(o<r)return i=this.schedule(void 0,r-o),void n.add(i);l()}r.subscribe((0,f._)(n,function(r){o=r,s=t.now(),i||(i=t.schedule(u,e),n.add(i))},function(){l(),n.complete()},void 0,function(){o=i=null}))})}},63638:(e,t,r)=>{r.d(t,{B:()=>c});var n=r(65959),i=r(29739),o=r(64307),s=(0,r(27412).L)(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),l=r(28827),u=r(52787),c=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,n.C6)(t,e),t.prototype.lift=function(e){var t=new a(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s},t.prototype.next=function(e){var t=this;(0,u.Y)(function(){var r,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,n.Ju)(t.currentObservers),s=o.next();!s.done;s=o.next())s.value.next(e)}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var t=this;(0,u.Y)(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;(0,u.Y)(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,n=r.hasError,i=r.isStopped,s=r.observers;return n||i?o.Kn:(this.currentObservers=null,s.push(e),new o.yU(function(){t.currentObservers=null,(0,l.o)(s,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;r?e.error(n):i&&e.complete()},t.prototype.asObservable=function(){var e=new i.c;return e.source=this,e},t.create=function(e,t){return new a(e,t)},t}(i.c),a=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return(0,n.C6)(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:o.Kn},t}(c)},79101:(e,t,r)=>{r.d(t,{F:()=>s});var n=r(84828),i=r(11183),o=r(91243);function s(e,t){return void 0===t&&(t=n.D),e=null!=e?e:l,(0,i.N)(function(r,n){var i,s=!0;r.subscribe((0,o._)(n,function(r){var o=t(r);!s&&e(i,o)||(s=!1,i=o,n.next(r))}))})}function l(e,t){return e===t}},87073:(e,t,r)=>{r.d(t,{DY:()=>o});const n=[];function i(e,t,r=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let i=0;i<n;i++)if(!r(e[i],t[i]))return!1;return!0}const o=(e,t,r)=>function(e,t=null,r=!1,o={}){null===t&&(t=[e]);for(const e of n)if(i(t,e.keys,e.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return o.lifespan&&o.lifespan>0&&(e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(e.remove,o.lifespan)),e.response;if(!r)throw e.promise}const s={keys:t,equal:o.equal,remove:()=>{const e=n.indexOf(s);-1!==e&&n.splice(e,1)},promise:(l=e,"object"==typeof l&&"function"==typeof l.then?e:e(...t)).then(e=>{s.response=e,o.lifespan&&o.lifespan>0&&(s.timeout=setTimeout(s.remove,o.lifespan))}).catch(e=>s.error=e)};var l;if(n.push(s),!r)throw s.promise}(e,t,!1,r)}}]);
//# sourceMappingURL=231.js.map